<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dino Jump</title>

  <style>
    body {
    font-family: Arial, sans-serif;
    text-align: center;
    background-color: #f4f4f4;
    overflow: hidden;
}

#game-container {
    position: relative;
    width: 100vw;
    height: 80vh;
    background-color: lightblue;
    border-bottom: 5px solid green;
}

#dino {
    position: absolute;
    bottom: 10vh;
    left: 10vw;
    width: 50px;
    height: 50px;
    background-color: brown;
}

.stone {
    position: absolute;
    width: 40px;
    height: 40px;
    background-color: gray;
    bottom: 10vh;
    right: 0;
}

.hidden {
    display: none;
}

#start-button, #restart-button {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 18px;
    cursor: pointer;
}

  </style>

  
</head>
<body>
    <div id="game-container">
        <div id="dino"></div>
    </div>
    <button id="start-button">Start</button>
    <div id="game-over-box" class="hidden">
        <p>Game Over</p>
        <button id="restart-button">Nochmal</button>
    </div>
    <script src="script.js"></script>
</body>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const dino = document.getElementById("dino");
    const startButton = document.getElementById("start-button");
    const restartButton = document.getElementById("restart-button");
    const gameOverBox = document.getElementById("game-over-box");
    const gameContainer = document.getElementById("game-container");

    let gameRunning = false;
    let gravity = 5;
    let jumpStrength = 15;
    let dinoVelocity = 0;

    function jump() {
        if (dino.getBoundingClientRect().bottom >= window.innerHeight * 0.90) {
            dinoVelocity = -jumpStrength;
        }
    }

    function gameLoop() {
        if (!gameRunning) return;

        // Schwerkraft
        dinoVelocity += gravity * 0.1;
        dino.style.bottom = Math.max(parseInt(dino.style.bottom) + dinoVelocity, 10) + "px";

        moveObstacles();
        detectCollision();

        requestAnimationFrame(gameLoop);
    }

    function createObstacle() {
        if (!gameRunning) return;

        const stone = document.createElement("div");
        stone.classList.add("stone");
        stone.style.left = "100vw"; 
        gameContainer.appendChild(stone);

        setTimeout(createObstacle, Math.random() * 2000 + 1000);
    }

    function moveObstacles() {
        document.querySelectorAll(".stone").forEach(stone => {
            let left = parseInt(window.getComputedStyle(stone).left);
            stone.style.left = (left - 5) + "px";

            if (left < -50) {
                stone.remove();
            }
        });
    }

    function detectCollision() {
        document.querySelectorAll(".stone").forEach(stone => {
            let dinoRect = dino.getBoundingClientRect();
            let stoneRect = stone.getBoundingClientRect();

            if (
                dinoRect.left < stoneRect.right &&
                dinoRect.right > stoneRect.left &&
                dinoRect.top < stoneRect.bottom &&
                dinoRect.bottom > stoneRect.top
            ) {
                gameOver();
            }
        });
    }

    function gameOver() {
        gameRunning = false;
        gameOverBox.classList.remove("hidden");
    }

    startButton.addEventListener("click", function () {
        gameRunning = true;
        dino.style.bottom = "10vh";
        gameOverBox.classList.add("hidden");
        document.querySelectorAll(".stone").forEach(stone => stone.remove());

        createObstacle();
        gameLoop();
    });

    restartButton.addEventListener("click", function () {
        gameOverBox.classList.add("hidden");
        startButton.click();
    });

    document.addEventListener("keydown", function (e) {
        if (e.key === " ") jump();
    });

    document.addEventListener("touchstart", function () {
        jump();
    }, { passive: true });
});
</script>
</html>
